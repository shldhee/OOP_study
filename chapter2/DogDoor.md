

# OOAD

## 2. 요구 사항 수집

* 좋은 소프트웨어를 만드는 첫 번째 단계는 소프트웨어가 고객이 원하는 기능을 수행하도록 하는 것임을 알았습니다.
* **하지만 고객이 정말로 원하는 것을 어떻게 알아내죠?**
* 어떻게 고객이 진정 원하는 것을 고객 스스로 알고 있는지 확인하죠?
* 이 부분이 바로 요구 사항의 수집이 필요한 부분입니다.
* 이 번장은 고객이 원하는 것을 만들어 주어 **고객을 만족시키는 방법**을 배웁니다.

### 새로운 프로그래밍 일이 생겼습니다.

* '덕의 강아지 문'이라는 최첨단 문을 개발중입니다.
* 토드와 지나: 첫 번째 고객, 피도(강아지)
* 의뢰내용
  - 강아지 문도 버튼 하나로 동작하길 원한다.

### 강아지 문부터 시작합시다.

* 첫번째 필요한 것은 강아지 문을 나타낼 클래스(`DogDoor`)입니다.

``` js
class DogDoor {
  // static open() {
  //   return DogDoor._open = false;
  // }
  constructor() {
    this._open = false;
  };

  open() {
    console.log('문이 열렸습니다.');
    this._open = true;
  }

  close() {
    console.log('문이 닫혔습니다.');
    this._open = false;
  }

  isOpen() {
    return this._open;
  }
}
```

### 코드 자석들

* `Remote`라는 또 다른 클래스를 작성한다.
* `Remote`는 리모콘으로 강아지 문을 작동할 수 있게 해줍니다.
* 토드와 지나는 침대에서 일어나지 않고도 리모콘을 이용해 강아지 문을 열고닫을 수 있습니다.

``` js
class Remote {
  constructor(door) {
    this._door = door;
  }

  pressButton() {
    // console.log(this._door);
    // console.log('리모콘을 눌렀습니당');
    if (this._door.isOpen()) {
      this._door.close();
    } else {
      this._door.open();
    }
  }
}
```

### 테스트 구동

* 강아지 문을 테스트 구동한다.

``` js
const door = new DogDoor();
const remote = new Remote(door);

console.log("피도 나가려고 짖는다.");
remote.pressButton();
console.log("피도 나갔다");
remote.pressButton();
console.log("피도 용변 마쳤다.");
remote.pressButton();
console.log("피도 복귀 했다.")
remote.pressButton();
```

### 사용해 보니 문제가 있네요.

* 문이 빨리 닫히지 않는다.
* 토끼, 쥐 등과 같이 친구들이 들어온다.
* 여러가지 문제 발생

### 위 문제들을 해결하기 위해 아래와 같이 계획을 세운다.

1. 강아지 문에 대한 요구 사항을 수집한다.
2. 문이 실제로 무엇을 해야 하는지 알아낸다.
3. 토드와 지나로부터 추가 정보를 얻는다.
4. 문을 잘 만든다.

* 1,2,3은 사용자와 많은 이야기를 나눈다.
* 4는 좋은 소프트웨어를 만든다.

### 요구사항이 뭔가요?

#### 그럼 도대체 하나의 요구 사항이라는 것이 정확히 무엇입니까?

**그것은 여러분의 시스템이 올바르게 동작하기 위해서 수행하는 특정한 하나의 일입니다.**

* 시스템 : 완성된 애플리케이션 또는 프로젝트, 여기선 토드와 지나의 완성된 강아지 문 구축(리모트 컨트롤 포함)
* 올바르게 : 시스템이 올바르게 동작하는지는 고객이 결정합니다. 고객이 만족스럽지 못하면 시스템은 제대로 동작되는 것이 아닙니다.
* 수행하는 : 강아지 문 시스템은 여러가지 일을 해야합니다. 열기, 닫기, 피도 밖으로 내보내기 등
* 특정한 : 하나의 요구 사항은 보통 한 가지 일이고 그 요구 사항을 해결했다는 것을 확인하기 위해 테스트를 할 수 있습니다.
* 요구 사항 : 하나의 요구 사항은 특정 상품이나 서비스가 어떤 것이어야 하는지 또는 무엇을 수행해야 하는지를 자세하게 설명하는 것입니다. 주로 시스템 엔지니어링이나 소프트웨어 엔지니어링 분야에서 공식적으로 자주 사용합니다.

#### 고객에게 귀 기울이세요

* 요구 사항들에 관한 한, 가장 좋은 방법은 원하는 것을 고객이 말하게 하는 것입니다. 그리고 시스템이 해야 할 일에 주의를 기울이세요. 시스템이 어떻게 고객이 말한 것을 수행할 지 찾아 낼 수 있습니다.
* 이 단계에서는 어떻게 프로그램을 만들지 걱정하지 말고 **시스템이 해야 할 일을 확실히 알아내도록 하세요**

### 간단한 요구 사항 리스트

#### 요구 사항 리스트 만들기

이제 토드와 지나가 무엇을 원하는지 알았으니, 새로운 요구 사항들을 적어 봅시다.

##### 토드와 지나의 강아지문, 버전 2.0 요구 사항 리스트(고객이 바라는 시스템이 해야 할일의 리스트)

1. 강아지 문은 열렸을 때 35cm 이상
2. 리모콘에 있는 하나의 버튼은 문이 닫혔을 떄 누르면 열리고, 열렸을때 누르면 닫힌다.
3. 강아지 문이 한번 열린 후, 닫지 않으면 자동으로 닫혀야 한다.

* 문서 여분의 공간을 남겨 놓자! 프로젝트 진행 중에 추가적인 요구 사항들은 항상 나온다.
* 문서를 작성하므로 상사에게 무엇을 하고 있는지, 프로젝트가 끝나려면 어떤 일이 남아있는지를 명확히 보여 줄 수 있다.

#### 여러분은 강아지 문이 어떻게 사용될지를 이해해야 합니다.

* 고객의 요구 사항들을 얻어내는 것에 관한 것중에 가장 힘든 부분의 하나는 가끔은 고객조차도 자기들이 원하는 것을 모릅니다. 그래서 여러분은 시스템이 해야 할 일을 결정하기 전에 고객에게 여러 가지 질문을 하여 그들이 원하는 것을 알아내야 합니다.
* 그러면 고객들이 요구한 것 이상을 생각할 수 있고, 고객이 자신의 문제점을 깨닫기도 전에 그들이 필요할만한 요구 사항을 추측해 볼 수도 있습니다.

### 토드와 지나가 필요로 하는 것 알이내

#### 강아지 문이 정말 해야 할 일은 무엇일까요?

##### 토드와 지나의 강아지문, 버전 2.0 강아지 문이 하는일(이것은 강아지 문이 실제 수행해야 할 일을 자세히 설명한 새로운 리스트)

1. 피도가 밖에 나가고 싶어 짖습니다.
2. 토드 또는 지나가 피도가 짖는 것을 듣습니다.
3. 토드 또는 지나가 리모콘의 버튼을 누릅니다.
4. 강아지 문이 열립니다.
5. 피도가 밖에 나갑니다.
6. 피도는 밖에서 쉬합니다.
7. 피도가 안으로 들어옵니다.
8. 강아지 문이 자동으로 닫힙니다.

* 이렇게 순서대로 문이 해야 할일을 나열해 봄으로써 요구 사항을 빠뜨린 것이 없는지 알아 볼 수 있습니다.
* 8번째 단계가 마무리되면, 피도는 밖에 나가 쉬를 하고 안에 들어와 있습니다. 그리고 토드와 지나는 새로운 강아지 문에 만족합니다.

#### 바보 같은 질문

* Q: 하나의 요구 사항은 고객이 원하는 애플리케이션의 기능들 중에 하나를 말하는 건가요?
* A: 좋은 요구 사항은 고객이 여러분에게 말하는 것 이상의 것을 포함하고 있으며, 예상 밖에 상황에서도 시스템이 잘 동작하도록 하는 내용이 포함되어 있습니다.

* Q: 토드와 지나를 위한 시스템은 강아지를 말하는 거죠?
* A: 시스템은 고객의 목적을 맞춰주기 위해 필요한 모든 것이라고 할 수 있습니다. 시스템은 강아지문, 리모콘이 포함되고 토드와 지나,피도는 시스템의 일부는 아니지만 시스템을 설계할 때 고려해야 할 대상입니다.

* Q: 나는 왜 내가 토드와 지나가 강아지문을 어떻게 이용할 지, 그리고 뭐 잘못될 것이 없는 지까지 알아내야 하는지 잘 모르겠습니다. 그건 그들의 문제지 내 문제가 아니잖아요?
* A: 위대한 소프트웨어를 만드는 데 첫 번재 단계는 **고객이 원하는 것**을 만들어 줘야 합니다. 그럴려면 위와 같은것들을 잘 알고 있어야 문제를 해결할 수 있습니다.

* Q: 그러면 토드와 지나가 강아지 문을 사용할 때 일어날지 모르는 안좋은 상황을 생각해 봐야 하는 것이군요?
* A: 물론입니다. 이제 그걸 해봅시다.

### 잘못될 수 있는 것은 잘못되기 마련입니다.

#### 문제 발생에 대한 계획안

* 토드와 지나의 강아지 문의 동작에 관한 다이어그램입니다. 하지만 일이 항상 계획한 대로 진행되지는 않기 때문에 계획에서 벗어날 부분을 적어 보았습니다.

1. 피도가 밖에 나가고 싶어 짖습니다. *피도가 밖에 나가고 싶을때 항상 짖나요? 피도가 문을 긁으면 어쩌죠?*
2. 토드 또는 지나가 피도가 짖는 것을 듣습니다. *토드와 지나가 집에 없을때? 피도가 짖는걸 못 들을때?*
3. 토드 또는 지나가 리모콘의 버튼을 누릅니다. *피도가 다른 이유로 짖었는데 문을 열어주면?*
4. 강아지 문이 열립니다. *문이 열리다 걸렸을때? 이건 하드웨어 문제니깐 고려하지 말까?*
5. 피도가 밖에 나갑니다. *피도가 나가지 않을때?*
6. 피도는 밖에서 쉬합니다. *피도 기분이 좋다*
7. 피도가 안으로 들어옵니다. *피도가 쉬를 다 하지 않았는데 문이 자동으로 닫히면?*
8. 강아지 문이 자동으로 닫힙니다. *피도가 밖에 있는데 문이 닫혔는데 피도가 짖을것을 듣고 토드와 지나가 리모콘을 눌러 피도를 집안에 들일 수 있을까요?*

### 잘못될 상황을 예측하기

#### 시스템의 문제는 대체 경로가 해결

* 문제가 만한 점을 알아냈으니, 이제 발견된 문제점을 해결하도록 리스트를 수정해야 합니다. 문이 피도가 오기 전에 닫히면 어떻게 될 지에 대해 작성해 봅시다.

##### 토드와 지나의 강아지문, 버전 2.0 강아지 문이 하는일(이것은 강아지 문이 실제 수행해야 할 일을 자세히 설명한 새로운 리스트)

1. 피도가 밖에 나가고 싶어 짖습니다.
2. 토드 또는 지나가 피도가 짖는 것을 듣습니다.
3. 토드 또는 지나가 리모콘의 버튼을 누릅니다.
4. 강아지 문이 열립니다.
5. 피도가 밖에 나갑니다.
6. 피도는 밖에서 쉬합니다.
    1. 문이 자동으로 닫힙니다.
    2. 피도가 들어 오려고 짖습니다.
    3. 토드나 지나가 피도가 짖는 것을 듣습니다.(다시)
    4. 토드나 지나가 리모콘을 누릅니다.
    5. 강아지 문이 열립니다.(다시)
7. 피도가 안으로 들어옵니다.
8. 강아지 문이 자동으로 닫힙니다.

* 6-1~5 피도가 밖에 머무르면, 안에 들어오기까지 다음과 같은 추가적인 단계들이 있습니다. 이러한 추가적인 단계를 **대체 경로**라고 합니다.
* 이 새로운 단계들은 피도가 집에 들어오기전에 문이 닫히는 문제를 해결합니다.
* 몇 단계를 추가하니, 토드와 지나가 생각지도 않았던 문제가 발생해도, 피도는 집안에 들어 올 수 있습니다.

##### 예! 여러분은 유스케이스를 쓰고 있는 거에요.

* 피도가 화장실에 가도록 밖으로 내보는 순서를 쓸 때, 여러분은 사실 **유스케이스**를 작성하고 있었던 겁니다.
* **유스케이스**는 시스템이 어떤 일을 수행하기 위해 거쳐야 하는 단계들을 말합니다. 토드와 지나의 경우에 어떤 일이란 피도를 밖에 내보내서 일을 보고 들어오게 하는 것이었습니다.

### 유스케이스란?

#### (다시)유스케이스를 소개합니다.

> 유스케이스는 고객의 특정한 목표를 달성하기 위해 여러분의 시스템이 무엇을 하는지를 기술합니다.

* 고객의 : 사용자는 시스템 부분이 아니고 시스템의 외부에 있습니다.
* 특정한 : 하나의 유스케이스는 하나의 목표에만 집중합니다.(토드와 지나가 침대에서 나오지 않고도 피도가 밖에 나갈 수 있게 하는것)
  - 만약 피도가 강아지문을 얼마나 많이 이용했는지를 기록하고 싶어 한다면, 그것은 다른 목적이며, 또 다른 유스케이스가 필요할 것입니다.
* 목표를 : 고객의 목표가 바로 유스케이스이 **핵심**입니다. 시스템은 고객이 고객의 목표를 달성하게 해야 합니다.
* 무엇을 : 유스케이스들은 "무엇"에 관한것입니다. 강아지 문이 무엇을 해야 하는가?
* 하는지를 : 우리는 분명 시스템이 무엇을 "해야" 하는지에 집중하고 있습니다. 피도를 밖으로 내보내려면(그리고 집안에 들이려면) 무엇이 일어나야 하는가?

* 피도, 토드, 지나는 시스템 외부에 있습니다.
* 강아지 문과 리모콘은 시스템의 부분 즉, 시스템의 내부에 있습니다.

* 유스케이스는 피도가 밖에 나가야할 때 강아지 문이 어떻게 동작하는 지를 명확히 설명합니다.
* 유스케이스는 **고객의 목표**가 완수되면 끝나게 됩니다. - 여기서는 토드, 지나가 침대에 편하게 있고 피도가 밖에서 볼일 보고 들어오는 것이 고객의 목표입니다.

#### 학자 코너

* 유스케이스 : 유스케이스는 새로 만들 시스템이나 소프트웨어 변경사항에 대한 요구 사항을 찾아내는 방법입니다. 각 유스케이스는 특정 목표를 달성하기 위해 시스템이 사용자 또는 다른 시스템과 어떻게 상호작용하는지를 전달하는 하나 이상의 시나리오를 제공합니다.

### 하나의 유스케이스, 세 가지 부분

* 좋은 유스케이슨 기본적으로 세 가지 부분이 있고, 유스케이스가 일을 끝내려면, 모두 필요합니다.

#### 1. 명확한 가치

모든 유스케이스는 시스템에게 명확한 가치를 가지고 있어야 합니다. 유스케이스가 고객의 목표 달성에 도움이 되지 않는다면 소용없는 유스케이스입니다.
(이 유스케이스는 토드와 지나가 피도를 다루는 데 도움이 되어야 합니다.)

#### 2. 시작과 종료

모든 유스케이스는 명확한 시작 시점과 종료 시점이 있어야 합니다. 뭔가가 유스케이스를 기동시키고, 유스케이스가 완료되었음을 표시하는 상태가 있어야 합니다.

#### 3. 외부 기동자(액터)

모든 유스케이스는 액터에 의해 시작됩니다. 액터는 주로 사람이지만 시스템 외부의 어떤 것이나 될 수 있습니다.
(강아지 문에서는, 피도가 외부 기동자입니다. 전체 유스케이스를 피도가 기동시키죠)

#### 유스케이스 자석

##### 토드와 지나의 강아지문, 버전 2.0 강아지 문이 하는일(이것은 강아지 문이 실제 수행해야 할 일을 자세히 설명한 새로운 리스트)

1. 피도가 밖에 나가고 싶어 짖습니다. - 유스케이스 시작점(피도가 외부기동자)
2. 토드 또는 지나가 피도가 짖는 것을 듣습니다.
3. 토드 또는 지나가 리모콘의 버튼을 누릅니다.
4. 강아지 문이 열립니다.
5. 피도가 밖에 나갑니다.
6. 피도는 밖에서 쉬합니다.
    1. 문이 자동으로 닫힙니다.
    1. 피도가 들어 오려고 짖습니다.
    1. 토드나 지나가 피도가 짖는 것을 듣습니다.(다시)
    1. 토드나 지나가 리모콘을 누릅니다.
    1. 강아지 문이 열립니다.(다시)
7. 피도가 안으로 들어옵니다.
8. 강아지 문이 자동으로 닫힙니다. - 유스케이스 종료점(피도가 집안에 들어오면 문이 닫힌 상태)

* 전체 유스케이스가 가치 있습니다. 왜냐하면 토드와 지나가 침대에 계속 있으면서 피도를 밖에 내보낼 수 있으니깐요.

#### 바보 같은 질문

* Q: 유스케이스는 시스템이 제대로 동작하기 위해 수행해야 할 단계들을 표시한 리스트입니다. 맞나요?
* A: 대부분의 경우 맞습니다. 하지만 유스케이스의 핵심 중 하나는 유스케이스가 **하나의 특정 목표**로르 달성하는데 초점을 맞추고 있다는 것입니다.

* Q: 그러면 시스템은 달성해야 하는 각 목표에 대해 유스케이스를 하나씩 만들어야 하나요?
* A: 네 맞습니다.

* Q: 유스케이스는 시스템이 목표 달성을 위해 무엇을 해야 하는지에 대한 것입니까?
* A: 네. 맞아요. 여러분이 한 가지일을 위해 시스템이 해야 할 일을 적는다면, 그것이 아마 하나의 유스케이스일 겁니다.

* Q: 하지만 유스케이스가 구체적이지 않아요. 각 유스케이스는 왜 Remote 클래스나 DogDoor클래스에 대해 애기하지 않았죠?
* A: 유스케이스는 시스템이 해야 할 일에 대해 여러분의 이해를 돕기 위해 - 그리고 또 시스템을 다른 사람(고객이나 상사)에게 설명하기 위해 - 만드는 것입니다.

* Q: 유스케이스와 유스케이스 다이어그램과 같은 것입니까?
* A: 아닙니다. 유스케이스들은 일련의 단계들입니다. 유스케이스 다이어그램은 유스케이스들을 시각적으로 보여주는 방법입니다.

* Q: 그러면 유스케이스를 가지고 어떻게 실제 코드를 만들죠?
* A: 그건 애플리케이션 작성 과정에서 또 다른 단계입니다. 유스케이스의 목적이 코드를 어떻게 작성할지를 자세하게 나타내는 것은 아닙니다.

* Q: 유스케이스가 코드 작성에는 별 도움이 되지 않으면, 유스케이스에 이렇게 시간을 들이는 이유가 뭐죠?
* A: 유스케이스는 코드 작성에 도움이 됩니다. - 프로그래밍의 세부 내용에 대해 구체적으로 명시하지 않을 뿐이죠. 고객이 원하는 소프트웨어를 제공하지 못하면 좋은 소프트웨어는 절대 만들 수 없습니다. 유스케이스는 여러분이 그것을 알아내게 하는 도구입니다.

### 모든 특징들을 해결했나요?

#### 유스케이스를 가지고 요구 사항 체크하기

* 지금까지 초기 단계의 요구 사항 집합과 하나의 유스케이스를 잘 작성하였습니다. 하지만 이제 요구 사항으로 돌아가서 시스템이 해야 할 일을 모두 담고 있는지 확인할 필요가 있습니다. 그리고 이때 유스케이스가 필요합니다.

### 다 해결합니까?

##### 토드와 지나의 강아지문, 버전 2.0 요구 사항 리스트(고객이 바라는 시스템이 해야 할일의 리스트)
##### 토드와 지나의 강아지문, 버전 2.0 강아지 문이 하는일(이것은 강아지 문이 실제 수행해야 할 일을 자세히 설명한 새로운 리스트)

##### 무엇을 빠트렸을까요?

* 이제 유스케이스를 살펴보고 시스템이 해야 할 일을 요구 사항이 모두 담고 있는 지 알아봐야 합니다.
* 유스케이스의 각 단계를 해결하는 요구 사항을 찾아내서 빈 칸에 요구 사항의 번호를 기입하기

##### 토드와 지나의 강아지문, 버전 2.0 강아지 문이 하는일(이것은 강아지 문이 실제 수행해야 할 일을 자세히 설명한 새로운 리스트)

1. 피도가 밖에 나가고 싶어 짖습니다. **(N/A)**
2. 토드 또는 지나가 피도가 짖는 것을 듣습니다. **(N/A)**
3. 토드 또는 지나가 리모콘의 버튼을 누릅니다. **2**
4. 강아지 문이 열립니다. **2**
5. 피도가 밖에 나갑니다.**1**
6. 피도는 밖에서 쉬합니다. **(N/A)**
    1. 문이 자동으로 닫힙니다. **3**
    2. 피도가 들어 오려고 짖습니다. **(N/A)**
    3. 토드나 지나가 피도가 짖는 것을 듣습니다.(다시) **(N/A)**
    4. 토드나 지나가 리모콘을 누릅니다. **2**
    5. 강아지 문이 열립니다.(다시) **2**
7. 피도가 안으로 들어옵니다. **1**
8. 강아지 문이 자동으로 닫힙니다. **3**

##### 토드와 지나의 강아지문, 버전 2.0 요구 사항 리스트(고객이 바라는 시스템이 해야 할일의 리스트)

1. 강아지 문은 열렸을 때 35cm 이상
2. 리모콘에 있는 하나의 버튼은 문이 닫혔을 떄 누르면 열리고, 열렸을때 누르면 닫힌다.
3. 강아지 문이 한번 열린 후, 닫지 않으면 자동으로 닫혀야 한다.

* 1,2 **(N/A)** 시스템이 일어나는 많은 일들이 여러분이 해야 하는 일과는 상관없습니다.
* 3 **2** 토드나 지나가 버튼을 누르는 것은 여러분이 다뤄야 할 것과 상관이 없기 때문에 여기에 **N/A**를 넣었을 수도 있겠지만 **2**도 괜찮습니다. 리모콘 없이는 버튼을 누를 수 없으니까요
* 5 **1** 피도는 열린 부분이 자신의 몸에 맞지 않으면 나갈 수 없습니다.
* 6 전체 주 경로에 대해 요구 사항을 알아냈다면 경로는 쉬웠을 겁니다.

#### 이제 우리가 코드를 작성할 수 있을까요?

* 유스케이스와 요구 사항들을 완성했으니, 여러분은 토드와 지나를 만족시킬 것이라고 알고 있는 코드를 작성할 준비가 되었습니다.

##### 토드와 지나의 강아지문, 버전 2.0 요구 사항 리스트(고객이 바라는 시스템이 해야 할일의 리스트)

1. 강아지 문은 열렸을 때 35cm 이상
2. 리모콘에 있는 하나의 버튼은 문이 닫혔을 떄 누르면 열리고, 열렸을때 누르면 닫힌다.
3. 강아지 문이 한번 열린 후, 닫지 않으면 자동으로 닫혀야 한다.

* 1. 이것은 덕과 하드웨어 담당자가 해결해야 할 것입니다. 이 요구 사항에는 코드가 필요 업습니다.
* 2. 이 요구 사항을 해결할 코드는 이미 있습니다.
* 3. 이것은 우리가 토드와 지나가 말해서 추가한 부분입니다. 자동으로 문을 닫는 부분은 코드를 작성해야 합니다.
